var sep="::",itemSep="##";function setCookie(a,c,b){var e=new Date;e.setTime(e.getTime()+864E5*b);expires=e.toGMTString();document.cookie=a+"\x3d"+escape(c)+"; expires\x3d"+expires+"; path\x3d/;";return unescape(readCookie(a))==c}function readCookie(a){a+="\x3d";for(var c=document.cookie.split(";"),b=0;b<c.length;b++){for(var e=c[b];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(a))return e.substring(a.length,e.length)}}
function addItemToBasket(a,c,b,e,f,g){c=c||photos;var n=c[a];0!=n.payment_id&&0!=f?(option=paymentOptions[f].payment_option,price=paymentOptions[f].price):(option=c[a].purchase_instruction,price=c[a].item_price);ref=n.photo_ref?n.photo_ref:a;name=n.caption;itemQuantity=e?e:1;c=n.item_shipping||0;existingData=unescape(readCookie(b));e="";if("null"!=existingData&&""!=existingData&&"undefined"!=existingData){e=existingData.split(itemSep);f=[""];for(var k=0,n=0;n<e.length;n++){var p=e[n].split(sep);unescape(p[0])==
a&&unescape(p[3])==option?(k=p[0]+sep+p[1]+sep+p[2]+sep+p[3]+sep+p[4]+sep+escape(parseInt(unescape(p[5]),10)+itemQuantity)+sep+p[6]+sep+p[7],f[1]=k,k=1):f[0]=""!=f[0]?f[0]+itemSep+e[n]:e[n]}e=k&&""!=f[0]?f[0]+itemSep+f[1]:""!=f[0]?f[0]+itemSep+escape(a)+sep+escape(ref)+sep+escape(name)+sep+escape(option)+sep+escape(price)+sep+escape(itemQuantity)+sep+escape(g)+sep+escape(c):f[1]}else e=escape(a)+sep+escape(ref)+sep+escape(name)+sep+escape(option)+sep+escape(price)+sep+escape(itemQuantity)+sep+escape(g)+
sep+escape(c);return setCookie(b,e,7)}function deleteCookie(a){setCookie(a,"",-1)}function purchaseItem(a,c,b,e,f,g,n,k){this.id=a;this.ref=c;this.name=b;this.option=e||b||c;this.price=parseFloat(f).toFixed(2);this.quantity=g;this.item_type=n;this.item_shipping=k||0}function updateCartValue(a,c){a.item_option.value=c}var arrayOfItems=null;
function getListOfDataInCookie(a){arrayOfItems=[];if(void 0!=a){a=unescape(a).split(itemSep);for(var c=0;c<a.length;c++){var b=a[c].split(sep);arrayOfItems[c]=new purchaseItem(unescape(b[0]),unescape(b[1]),unescape(b[2]),unescape(b[3]),unescape(b[4]),unescape(b[5]),unescape(b[6]),unescape(b[7]))}}}
function getOrderDetails(a){getListOfDataInCookie(readCookie(a));data={quantity:0,price:0};for(var c in arrayOfItems)data.quantity+=parseInt(arrayOfItems[c].quantity);data.price=orderTotal();return data}function dspOrderDetails(a,c){var b=getOrderDetails(a);$("#shopping-cart-total-quantity").html(b.quantity);$("#shopping-cart-total-price").html(b.price);0==b.quantity&&c&&$("#"+c).hide()}
function writeItemsArrayToCookie(a){for(var c="",b=0;b<arrayOfItems.length;b++)var e="",e=e+(escape(arrayOfItems[b].id)+sep),e=e+(escape(arrayOfItems[b].ref)+sep),e=e+(escape(arrayOfItems[b].name)+sep),e=e+(escape(arrayOfItems[b].option)+sep),e=e+(escape(arrayOfItems[b].price)+sep),e=e+(escape(arrayOfItems[b].quantity)+sep),e=e+(escape(arrayOfItems[b].item_type)+sep),e=e+escape(arrayOfItems[b].item_shipping),c=""==c?e:c+itemSep+e;""!=c?setCookie(a,c,7):deleteCookie(a)}
function updateQuantity(a,c,b,e){if(isPositive(e)&&isInteger(e)){""==e&&(e=0);for(var f=0;f<arrayOfItems.length;f++)if(arrayOfItems[f].id==c&&arrayOfItems[f].option==b){arrayOfItems[f].quantity=e;break}writeItemsArrayToCookie(a)}}function removeItem(a,c){arrayOfItems.splice(c,1);writeItemsArrayToCookie(a)}function isNumber(a){return"NaN"==(new Number(a)).toString()?0:1}function isInteger(a){return isNumber(a)?-1!=a.indexOf(".")?0:1:0}
function isPositive(a){return isNumber(a)?0<=new Number(a)?1:0:0}function totalPrice(a,c){return parseFloat(a*c).toFixed(2)}function orderTotal(a){for(var c=0,b=0;b<arrayOfItems.length;b++)c=parseFloat(c)+parseFloat(totalPrice(arrayOfItems[b].price,arrayOfItems[b].quantity));a||(c+=parseFloat(shippingTotal(c)));return c.toFixed(2)}
function shippingTotal(a){var c=0;if("undefined"!==typeof clikOrderShipping){void 0===a&&(a=orderTotal(1));a=parseFloat(a);for(var b=0;b<clikOrderShipping.length&&!(clikOrderShipping[b].cart_min_value>a);b++)c=clikOrderShipping[b].shipping_price}return parseFloat(c).toFixed(2)}function setHTML(a,c){try{document.getElementById(a).innerHTML=c}catch(b){document.all[a].innerHTML=c}}function getArrayIndex(a,c){for(var b=0;b<a.length;b++)if(a[b].id==c)return b}
function opacity(a,c){var b=null;try{b=document.getElementById(a).style}catch(e){b=document.all[a].style}b.filter="alpha(opacity\x3d"+c+")";b.opacity=c/100;b.MozOpacity=c/100;b.KhtmlOpacity=c/100}function fadeIn(a,c){var b=1;null==c&&(c=6);for(var e=0;100>=e;e++)setTimeout("opacity('"+a+"', "+e+")",c*b),b++}function fadeOut(a,c){var b=1;null==c&&(c=6);for(var e=100;0<=e;e--)setTimeout("opacity('"+a+"', "+e+")",c*b),b++}var xmlHttp;
function ajaxFunction(){try{xmlHttp=new XMLHttpRequest}catch(a){try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{xmlHttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){return alert("Your browser doesn't support AJAX!"),!1}}}}function confirmRemove(a,c,b){confirm(a)&&(removeItem(c,b),-1==navigator.userAgent.indexOf("Safari")?window.location.replace(unescape(window.location.href)):window.location.reload(!1))}
function divShowing(a){var c=null;try{for(var b=0;b<document.styleSheets[0].cssRules.length;b++)document.styleSheets[0].cssRules[b].selectorText=="div#"+a&&(c=document.styleSheets[0].cssRules[b].style.opacity)}catch(e){try{for(b=0;b<document.styleSheets[0].cssRules.length;b++)document.styleSheets[0].cssRules[b].selectorText=="div#"+a&&(c=document.styleSheets[0].cssRules[b].style.MozOpacity)}catch(f){for(b=0;b<document.styleSheets[0].rules.length;b++)if(document.styleSheets[0].rules[b].selectorText==
"DIV#"+a){var g=document.styleSheets[0].rules[b].style.filter.split("\x3d");1<g.length&&(g=g[1].split(")"),c=g[0])}}}var n=b=null,k=null,b=document.getElementById(a).style.opacity,n=document.getElementById(a).style.MozOpacity;a=new String(document.getElementById(a).style.filter);"undefined"!=a&&(g=a.split("\x3d"),1<g.length&&(g=g[1].split(")"),k=g[0]));return 0<c||0<b||0<n||0<k?1:0}
(function(a){a.fn.extend({cartFormInit:function(c){var b=a.extend({},{allowed_methods:[],payment_urls:{},payment_targets:{0:"",1:"",2:"_blank"},save_cart_url:"_save_cart_v2.cfm",submitButtons:{},use_pdt:!1},c),e=a(this).find("form");e.bind("submit.clikCart",function(c){var g=parseInt(e.find("[name\x3dpayment_method_id]:checked").val());if(1==b.allowed_methods.length)g=b.allowed_methods[0];else if(-1==a.inArray(g,b.allowed_methods))return alert(e.find("[name\x3dpayment_method_id]").eq(0).data("message")),
!1;switch(g){case 1:return""!=e.find("[name\x3dnotify_url]").val()?e.ajaxSubmit({url:b.save_cart_url,dataType:"json",success:function(a){e.find("[name\x3dinvoice]").val(a.clik_orders_id);e.attr({action:b.payment_urls[g],target:b.payment_targets[g]}).unbind("submit.clikCart").submit()}}):e.attr({action:b.payment_urls[g],target:b.payment_targets[g]}).unbind("submit.clikCart").submit(),!1;default:e.attr({action:b.payment_urls[g],target:b.payment_targets[g]})}}).find("[name\x3dpayment_method_id]").bind("change.clikCart",
function(c){c=e.find("[name\x3dpayment_method_id]");c=parseInt(1==c.length?c.val():c.filter(":checked").val());-1!=a.inArray(c,b.allowed_methods)&&e.attr({action:b.payment_urls[c],target:b.payment_targets[c]}).find(".formSubmitButton").html(b.submitButtons[c])}).change()},clikProducts:function(c){var b=a(this);c=a.extend({},{paymentSelector:".paymentBuyLink"},c);b.find(c.paymentSelector).each(function(){toggleAddProductToCartConfirm(products,a(this))});return b}})})(jQuery);